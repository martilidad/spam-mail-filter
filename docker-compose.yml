# This file starts the application in a docker container with davmail
# to not use davmail change spamfilter command or directly use dockerfile
# other settings can be directly changed in spamfilter.ini
version: "3.7"
services:
  davmail:
    image: jberrenberg/davmail
    volumes:
      # local properties : container properties
      - "./davmail.properties:/etc/davmail/davmail.properties"
    networks:
      - shared
# smtp port if needed
# ports:
#      - "1025:1025"
  spamfilter:
    # container defined in dockerfile
    build: .
    # connect to davmail
    command: "python __main__.py --ssl false --port 1143 --host davmail"
    networks:
      - shared
networks:
  shared:
    driver: bridge


